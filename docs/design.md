# Архитектура проекта

Система состоит из следующих компонентов и модулей:

- **Агенты (`agents/`)**:
  - `BuyerAgent` (агент-покупатель) хранит предпочтения пользователя и выбирает товар из рекомендаций.
  - `ItemAgent` (агент-товар) представляет товар с уникальным ID, названием, категорией и ценой.
  - `MarketplaceAgent` (агент-рынок) содержит все товары и отвечает за генерацию рекомендаций для покупателя.
- **Симулятор (`environment/simulator.py`)**:
  - Запускает несколько сессий взаимодействия. Для каждой сессии создаётся новый `BuyerAgent` с случайными предпочтениями, запрашиваются рекомендации у `MarketplaceAgent`, имитируется выбор товара, затем собираются данные по показам и кликам. В конце вычисляется общая метрика CTR.
- **Протокол переговоров (`gigachat/negotiation_protocol.py`)**:
  - Интеграция с Sber GigaChat API. `MarketplaceAgent` передаёт в GigaChat запрос с предпочтениями покупателя и списком товаров. GigaChat возвращает JSON со списком рекомендованных ID. Если ключ API отсутствует, используется простой алгоритм фильтрации по категориям и сортировки по цене.
- **Метрики (`metrics/evaluation.py`)**:
  - Модуль `calculate_ctr` на основе библиотеки pandas рассчитывает процент кликов (CTR) по данным симуляции.
- **Backend на FastAPI**:
  - Файл `main.py` определяет эндпоинт `/simulate`, который запускает симуляцию и возвращает результаты в формате JSON. В `requirements.txt` перечислены необходимые библиотеки (FastAPI, uvicorn, gigachat и др.).
- **Frontend (React)**:
  - В папке `frontend/` находится веб-интерфейс. Компонент `App.jsx` запрашивает рекомендации с бэкенда при нажатии кнопки. Компонент `ResultCard.jsx` отображает информацию по каждому рекомендованному товару.
- **Docker и Docker Compose**:
  - Файлы `Dockerfile` и `docker-compose.yml` обеспечивают контейнеризацию. Сервис `backend` запускает FastAPI на порту 8000, `frontend` — React-приложение на порту 3000. Такая конфигурация позволяет легко запускать проект локально и развёртывать его на платформах вроде Railway.

Каждый компонент разрабатывался так, чтобы быть максимально независимым и модульным, что упрощает расширение и поддержку проекта.
